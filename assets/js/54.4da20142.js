(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{462:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("文档：https://web.dev/fast/")]),t._v(" "),a("h2",{attrs:{id:"核心-web-指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心-web-指标"}},[t._v("#")]),t._v(" 核心 web 指标")]),t._v(" "),a("p",[t._v("衡量用户体验方面的三个性能指标： LCP 、FID 、CLS")]),t._v(" "),a("h2",{attrs:{id:"lcp-largest-contentful-paint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lcp-largest-contentful-paint"}},[t._v("#")]),t._v(" LCP (Largest Contentful Paint)")]),t._v(" "),a("p",[t._v("最大内容绘制，测量加载性能。为了提供良好的用户体验，LCP 应在页面首次开始加载后2.5s内发生。")]),t._v(" "),a("p",[t._v("最大内容绘制 (LCP) 指标会根据页面首次开始加载的时间点来报告可视区域内可见的最大图像或文本块完成渲染的相对时间。")]),t._v(" "),a("h4",{attrs:{id:"考量的范围："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#考量的范围："}},[t._v("#")]),t._v(" 考量的范围：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("<img>元素")])]),t._v(" "),a("li",[t._v("内嵌在"),a("code",[t._v("<svg>")]),t._v("元素内的"),a("code",[t._v("<image>")]),t._v("元素")]),t._v(" "),a("li",[a("code",[t._v("<video>")]),t._v("元素（使用封面图像）")]),t._v(" "),a("li",[t._v("通过"),a("code",[t._v("url()")]),t._v("函数（而非使用CSS 渐变）加载的带有背景图像的元素")]),t._v(" "),a("li",[t._v("包含文本节点或其他行内级文本元素子元素的块级元素。")])]),t._v(" "),a("h4",{attrs:{id:"影响-lcp-的因素："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影响-lcp-的因素："}},[t._v("#")]),t._v(" 影响 LCP 的因素：")]),t._v(" "),a("ul",[a("li",[t._v("缓慢的服务器响应速度")]),t._v(" "),a("li",[t._v("JavaScript 和 CSS 渲染阻塞")]),t._v(" "),a("li",[t._v("资源加载时间")]),t._v(" "),a("li",[t._v("客户端渲染")])]),t._v(" "),a("h4",{attrs:{id:"优化方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化方案"}},[t._v("#")]),t._v(" 优化方案")]),t._v(" "),a("h5",{attrs:{id:"_1-缓慢的服务器响应速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-缓慢的服务器响应速度"}},[t._v("#")]),t._v(" 1. 缓慢的服务器响应速度")]),t._v(" "),a("p",[t._v("首先要做的就是使用 Time to First Byte 首字节时间（TTFB）来测量您的服务器响应时间，可以通过多种方式来改进 TTFB:")]),t._v(" "),a("p",[t._v("a. 优化服务器")]),t._v(" "),a("p",[t._v("服务器过载时，可通过排查服务器的 CPU、网络、内存、磁盘I/O 找到瓶颈，以解决问题；")]),t._v(" "),a("p",[t._v("b. 将用户路由到附近的 CDN")]),t._v(" "),a("p",[t._v("c. 缓存资源")]),t._v(" "),a("p",[t._v("(1) 通过 nginx 做反向代理，缓存资源内容（重复的资源不需要每次都向源服务器去获取）")]),t._v(" "),a("p",[t._v("(2) 配置云服务商的缓存行为")]),t._v(" "),a("p",[t._v("(3) 使用提供边缘服务器的 CDN，以便将您的内容进行缓存并存储在离您的用户更近的地方")]),t._v(" "),a("p",[t._v("d. 优先使用缓存提供的 HTML 页面 （Service Worker）")]),t._v(" "),a("p",[t._v("安装好的 Service Worker 会在浏览器后台运行，并可以拦截来自服务器的请求。此级别的程序化缓存控制使得缓存部分或全部 HTML 页面内容得以实现，并且只会在内容发生更改时更新缓存。")]),t._v(" "),a("p",[t._v("e. 尽早建立第三方链接 （dns）")]),t._v(" "),a("p",[t._v("告诉浏览器尽快建立链接")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preconnect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("使用 dns-prefetch 尽快完成 DNS 查找")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("f. 使用签名交换 （SXG）")]),t._v(" "),a("p",[t._v("签名交换 (SXG) 是一种交付机制，通过提供采用了易于缓存格式的内容来实现更快的用户体验。具体来说， Google 搜索会缓存 SXG，有时也会预获取 SXG。对于通过 Google 搜索获得大部分流量的网站，SXG 可以是改进 LCP 的重要工具。\nhttps://web.dev/signed-exchanges/")]),t._v(" "),a("h5",{attrs:{id:"_2-阻塞渲染的-javascript-和-css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-阻塞渲染的-javascript-和-css"}},[t._v("#")]),t._v(" 2. 阻塞渲染的 JavaScript 和 CSS")]),t._v(" "),a("p",[t._v("减少 CSS 阻塞时间:")]),t._v(" "),a("p",[t._v("(1) 削减 CSS\nCSS 文件可以包含空格、缩进或注释等字符。这些字符对于浏览器来说都不是必要的，而对这些文件进行削减能够确保将这些字符删除。最终，在减少了阻塞渲染的 CSS 数量后，充分渲染页面主要内容所需的时间 (LCP) 也总是能够相应地缩短。")]),t._v(" "),a("p",[t._v("对于 webpack：       optimize-css-assets-webpack-plugin\n对于 Gulp：gulp-clean-css\n对于 Rollup：rollup-plugin-css-porter")]),t._v(" "),a("p",[t._v("(2) 延迟加载非关键 CSS")]),t._v(" "),a("p",[t._v("使用 Chrome 开发者工具中的 "),a("code",[t._v("Coverage")]),t._v("  来查看 CSS 的覆盖率")]),t._v(" "),a("p",[t._v("a. 如果是在您网站的单独页面上使用，可以将所有未使用的 CSS 完全删除或移动到另一个样式表。")]),t._v(" "),a("p",[t._v('b. 对于任何初始渲染时不需要的 CSS，请使用 loadCSS 来异步加载文件，这里运用了rel="preload"和onload。')]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onload")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),a("span",{pre:!0,attrs:{class:"token value javascript language-javascript"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stylesheet'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("(3) 内联关键 CSS")]),t._v(" "),a("p",[t._v("通过把用于首屏内容的任何关键路径 CSS 直接包括在"),a("code",[t._v("<head>")]),t._v("中来将这些 CSS 进行内联。")]),t._v(" "),a("p",[t._v("将重要样式进行内联后，就不再需要通过往返请求来获取关键 CSS。延迟加载其余部分可以最大限度地减少 CSS 阻塞时间。")]),t._v(" "),a("p",[t._v("自动提取内联首屏 CSS 的库："),a("a",{attrs:{href:"https://github.com/addyosmani/critical",target:"_blank",rel:"noopener noreferrer"}},[t._v("Critical"),a("OutboundLink")],1),t._v(" 、"),a("a",{attrs:{href:"https://github.com/filamentgroup/criticalCSS",target:"_blank",rel:"noopener noreferrer"}},[t._v("CriticalCSS"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"Penthouse"}},[t._v("Penthouse")])]),t._v(" "),a("br"),t._v(" "),a("p",[t._v("减少 Javascript 阻塞时间:")]),t._v(" "),a("p",[t._v("(1) 削减和压缩 Javascript 文件")]),t._v(" "),a("p",[t._v("(2) 延迟加载未使用的 Javascript")]),t._v(" "),a("p",[t._v("(3) 最大限度减少未使用的 polyfill")]),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("3. 缓慢的资源加载速度")])]),t._v(" "),a("p",[t._v("a. 优化和压缩图像")]),t._v(" "),a("p",[t._v("(1) 压缩图像")]),t._v(" "),a("p",[t._v("(2) 将图像转换为更新的格式（JPEG 2000、JPEG XR 或 Webp）")]),t._v(" "),a("p",[t._v("cwebp 命令行工具或 Imagemin WebP 插件")]),t._v(" "),a("p",[t._v("(3) 使用响应式图像")]),t._v(" "),a("p",[t._v("(4) 考虑使用图像 CDN")]),t._v(" "),a("p",[t._v("b. 预加载重要资源")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("script.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("style.css"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("img.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("vid.webm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("video/webm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font.woff2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font/woff2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("c. 压缩文本文件")]),t._v(" "),a("p",[t._v("使用 Gzip 或者 Brotil 压缩算法")]),t._v(" "),a("p",[t._v("d. 基于网络连接交付不同资产（自适应服务）")]),t._v(" "),a("p",[t._v("根据用户的设备或网络条件按需获取不同的资源。")]),t._v(" "),a("p",[t._v("您可以使用的一系列实用属性：")]),t._v(" "),a("p",[t._v("navigator.connection.effectiveType：有效连接类型\nnavigator.connection.saveData：启用/禁用数据保护程序\nnavigator.hardwareConcurrency：CPU 核心数\nnavigator.deviceMemory：设备内存")]),t._v(" "),a("p",[t._v("e. 使用 Service Worker 缓存资产")]),t._v(" "),a("p",[t._v("Service Worker 还可用于缓存任何静态资源，并在收到重复请求时将资源直接提供给浏览器，而无需通过网络。")]),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("4. 客户端渲染")])]),t._v(" "),a("p",[t._v("(1) 最小化关键 Javascript")]),t._v(" "),a("p",[t._v("(2) 使用服务端渲染")]),t._v(" "),a("p",[t._v("(3) 使用预渲染")]),t._v(" "),a("p",[t._v("预渲染是一种独立的技巧，该技巧比服务端渲染简单，并且还提供了一种改进应用程序 LCP 的方法。无头浏览器是一种没有用户界面的浏览器，我们会用无头浏览器在搭建期间生成每个路由的静态 HTML 文件。然后可以将这些文件与应用程序所需的 JavaScript 包一起进行运送。")]),t._v(" "),a("p",[t._v("在使用预渲染后，TTI 仍然会受到负面影响，但服务器响应时间不会像服务端渲染解决方案（仅在接到请求后才对各个页面进行动态渲染）中那样受到很大影响。")]),t._v(" "),a("h2",{attrs:{id:"fid-first-input-delay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fid-first-input-delay"}},[t._v("#")]),t._v(" FID (First Input Delay)")]),t._v(" "),a("p",[t._v("首次输入延迟，测量交互性。为了提供良好的用户体验，页面的 FID 应为100ms或更短。")]),t._v(" "),a("p",[t._v("FID 是测量从用户第一次与页面交互直到浏览器对交互作出响应，并实际能够开始处理事件处理程序所经过的时间。")]),t._v(" "),a("p",[t._v("进一步解释，FID 是测量接收到输入事件的时间点与主线程下一次空闲的时间点的差值。")]),t._v(" "),a("h4",{attrs:{id:"优化方案-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化方案-2"}},[t._v("#")]),t._v(" 优化方案")]),t._v(" "),a("p",[t._v("首次输入延迟主要是浏览器在主线程上执行 JavaScript 时无法对大多数用户输入作出响应。换句话说，当主线程繁忙时，浏览器无法响应用户交互。")]),t._v(" "),a("p",[a("strong",[t._v("1. 分割场任务")])]),t._v(" "),a("p",[t._v("阻塞主线程超过 50ms 或以上的代码都可以被称为长任务。")]),t._v(" "),a("p",[t._v("可以使用代码分割和分割长任务（拆分为多个异步小任务）的方式改善。")]),t._v(" "),a("p",[a("strong",[t._v("2. 优化您的页面，做好交互准备")])]),t._v(" "),a("p",[t._v("a. 第一方脚本执行会延迟交互准备\n（1）可以分割代码、按需加载代码\n（2）服务端渲染的应用，将更多的逻辑转移到服务器端")]),t._v(" "),a("p",[t._v("b. 数据获取会影响交互准备的许多方面\n（1）等待一连串的级联获取会影响交互延迟，尽可能的减少对级联数据获取的依赖\n（2）大型内联数据存储会延长 HTML 解析时间并影响绘制和交互指标。最大限度地减少需要在客户端进行后处理的数据。")]),t._v(" "),a("p",[t._v("c. 第三方脚本执行也会加剧交互延迟")]),t._v(" "),a("p",[a("strong",[t._v("3. 使用 Web Worker")])]),t._v(" "),a("p",[t._v("Comlink：一个助手类库，该库抽象了postMessage，使其更易于使用\nWorkway : 一个通用的 Web Worker 导出器\nWorkerize：将模块移动到 Web Worker 中")]),t._v(" "),a("p",[a("strong",[t._v("4. 减少JavaScript执行时间")]),t._v("\n优化方案同 LCP 中的方案")]),t._v(" "),a("h2",{attrs:{id:"cls-cumulative-layout-shift"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cls-cumulative-layout-shift"}},[t._v("#")]),t._v(" CLS (Cumulative Layout Shift)")]),t._v(" "),a("p",[t._v("累积布局偏移，测量视觉稳定性。为了提供良好的用户体验，页面的 CLS 应保持在 0.1.或更少。")]),t._v(" "),a("h2",{attrs:{id:"在-js-中测量核心-web-指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-js-中测量核心-web-指标"}},[t._v("#")]),t._v(" 在 JS 中测量核心 web 指标")]),t._v(" "),a("p",[t._v("web-vitals")]),t._v(" "),a("h2",{attrs:{id:"其他-web-指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他-web-指标"}},[t._v("#")]),t._v(" 其他 web 指标")]),t._v(" "),a("h4",{attrs:{id:"ttfb-time-to-first-byte"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ttfb-time-to-first-byte"}},[t._v("#")]),t._v(" TTFB (Time to First Byte)")]),t._v(" "),a("p",[t._v("首字节时间")]),t._v(" "),a("h4",{attrs:{id:"fcp-first-contentful-paint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fcp-first-contentful-paint"}},[t._v("#")]),t._v(" FCP (First Contentful Paint)")]),t._v(" "),a("p",[t._v("首次内容绘制")])])}),[],!1,null,null,null);a.default=e.exports}}]);